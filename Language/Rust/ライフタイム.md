# ライフタイム

## 概要

Rustの **ライフタイム** の概念について記載する。

## 説明

ライフタイムとは、変数の生存期間を示すもの。
Rustコンパイラは、コンパイル時に変数のライフタイムを計算して、整合性を検査する。
不整合が発見された場合、コンパイルエラーになる。

以下の例では不整合が発見される。
``` rust
fn main() {
    let a;             // (1) a を宣言
    {
        let b = 10;    // (2) b を宣言、代入
        a = &b;        // (3) a に b の参照を代入
    }
    println!("{}", a); // (4) a を表示
                       //     -> a は b の参照を保持しているが、b のライフタイムは終了しているため、メモリ上に存在しない。
                       //        ライフタイムの不整合が発見されるので、コンパイルエラーになる
}
```

ライフタイムには以下の3種類がある。
* 字句ライフタイム
変数のライフタイムは **変数が定義されてからその変数が定義されたブロックが終了するまで** と決まっている。

* 非字句ライフタイム
変数のライフタイムは **変数の利用のされ方まで意味的な解釈をして** 決定される

* 静的ライフタイム
変数のライフタイムは **プログラムの開始から終了まで** と決まっている。